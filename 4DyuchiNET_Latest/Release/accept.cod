; Listing generated by Microsoft (R) Optimizing Compiler Version 18.00.30501.0 

	TITLE	E:\GitHub\Mso_Code\4DyuchiNET_Latest\accept.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?StartAcceptThread@@YAHPAVCNetwork@@@Z		; StartAcceptThread
PUBLIC	?EndAcceptThread@@YAHIPAX@Z			; EndAcceptThread
PUBLIC	?GetAcceptInterval@CNetwork@@QAEKXZ		; CNetwork::GetAcceptInterval
PUBLIC	?SetAcceptTHreadHandle@CNetwork@@QAEXPAX@Z	; CNetwork::SetAcceptTHreadHandle
PUBLIC	?GetListenSocket@CNetwork@@QAEIXZ		; CNetwork::GetListenSocket
PUBLIC	?AcceptThread@@YGIPAX@Z				; AcceptThread
PUBLIC	??_C@_05NAOIJFC@Error?$AA@			; `string'
PUBLIC	??_C@_0BN@EOPMAGF@Fail?5to?5Create?5Accept?5Thread?$AA@ ; `string'
EXTRN	__imp__CloseHandle@4:PROC
EXTRN	__imp__WaitForSingleObject@8:PROC
EXTRN	__imp__Sleep@4:PROC
EXTRN	__imp__SetThreadPriority@8:PROC
EXTRN	__imp__GetActiveWindow@0:PROC
EXTRN	__imp__MessageBoxA@16:PROC
EXTRN	__imp__closesocket@4:PROC
EXTRN	__imp__WSAAccept@20:PROC
EXTRN	__beginthreadex:PROC
EXTRN	__endthreadex:PROC
EXTRN	?InsertPreConnect@CPreConnectPool@@QAEHPAUCONNECT_ITEM@@@Z:PROC ; CPreConnectPool::InsertPreConnect
EXTRN	?ProcessPreConnectedItem@@YAXXZ:PROC		; ProcessPreConnectedItem
EXTRN	@__security_check_cookie@4:PROC
EXTRN	?g_pPreConnectPool@@3PAVCPreConnectPool@@A:DWORD ; g_pPreConnectPool
EXTRN	___security_cookie:DWORD
;	COMDAT ??_C@_0BN@EOPMAGF@Fail?5to?5Create?5Accept?5Thread?$AA@
CONST	SEGMENT
??_C@_0BN@EOPMAGF@Fail?5to?5Create?5Accept?5Thread?$AA@ DB 'Fail to Creat'
	DB	'e Accept Thread', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_05NAOIJFC@Error?$AA@
CONST	SEGMENT
??_C@_05NAOIJFC@Error?$AA@ DB 'Error', 00H		; `string'
CONST	ENDS
; Function compile flags: /Ogtp
;	COMDAT ?AcceptThread@@YGIPAX@Z
_TEXT	SEGMENT
_len$ = -60						; size = 4
_item$ = -56						; size = 36
_addr$ = -20						; size = 16
__$ArrayPad$ = -4					; size = 4
_lpVoid$ = 8						; size = 4
?AcceptThread@@YGIPAX@Z PROC				; AcceptThread, COMDAT
; File e:\github\mso_code\4dyuchinet_latest\accept.cpp
; Line 46
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 3c	 sub	 esp, 60			; 0000003cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	56		 push	 esi
  00012	57		 push	 edi
  00013	8b 7d 08	 mov	 edi, DWORD PTR _lpVoid$[ebp]
; Line 61
  00016	b8 e8 03 00 00	 mov	 eax, 1000		; 000003e8H
; Line 70
  0001b	6a 00		 push	 0
  0001d	6a 00		 push	 0
  0001f	0f 57 c0	 xorps	 xmm0, xmm0
  00022	c7 45 c4 10 00
	00 00		 mov	 DWORD PTR _len$[ebp], 16 ; 00000010H
; File e:\github\mso_code\4dyuchinet_latest\network.h
; Line 68
  00029	8b 5f 64	 mov	 ebx, DWORD PTR [edi+100]
; File e:\github\mso_code\4dyuchinet_latest\accept.cpp
; Line 61
  0002c	3b d8		 cmp	 ebx, eax
  0002e	f3 0f 7f 45 ec	 movdqu	 XMMWORD PTR _addr$[ebp], xmm0
  00033	0f 47 d8	 cmova	 ebx, eax
; Line 70
  00036	8d 45 c4	 lea	 eax, DWORD PTR _len$[ebp]
  00039	50		 push	 eax
  0003a	8d 45 ec	 lea	 eax, DWORD PTR _addr$[ebp]
  0003d	50		 push	 eax
  0003e	ff 77 38	 push	 DWORD PTR [edi+56]
  00041	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__WSAAccept@20
; Line 72
  00047	53		 push	 ebx
  00048	8b f0		 mov	 esi, eax
  0004a	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__Sleep@4
; Line 74
  00050	83 fe ff	 cmp	 esi, -1
  00053	74 4b		 je	 SHORT $seg_destroy$19
$LL4@AcceptThre:
; Line 86
  00055	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?g_pPreConnectPool@@3PAVCPreConnectPool@@A ; g_pPreConnectPool
  0005b	8d 45 c8	 lea	 eax, DWORD PTR _item$[ebp]
  0005e	50		 push	 eax
  0005f	89 75 c8	 mov	 DWORD PTR _item$[ebp], esi
  00062	89 7d cc	 mov	 DWORD PTR _item$[ebp+4], edi
  00065	c7 45 d0 00 00
	00 00		 mov	 DWORD PTR _item$[ebp+8], 0
  0006c	c7 45 d4 00 00
	00 00		 mov	 DWORD PTR _item$[ebp+12], 0
  00073	e8 00 00 00 00	 call	 ?InsertPreConnect@CPreConnectPool@@QAEHPAUCONNECT_ITEM@@@Z ; CPreConnectPool::InsertPreConnect
; Line 87
  00078	e8 00 00 00 00	 call	 ?ProcessPreConnectedItem@@YAXXZ ; ProcessPreConnectedItem
  0007d	6a 00		 push	 0
  0007f	6a 00		 push	 0
  00081	8d 45 c4	 lea	 eax, DWORD PTR _len$[ebp]
  00084	50		 push	 eax
  00085	8d 45 ec	 lea	 eax, DWORD PTR _addr$[ebp]
  00088	50		 push	 eax
  00089	ff 77 38	 push	 DWORD PTR [edi+56]
  0008c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__WSAAccept@20
  00092	53		 push	 ebx
  00093	8b f0		 mov	 esi, eax
  00095	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__Sleep@4
  0009b	83 fe ff	 cmp	 esi, -1
  0009e	75 b5		 jne	 SHORT $LL4@AcceptThre
$seg_destroy$19:
; Line 90
  000a0	6a 00		 push	 0
  000a2	e8 00 00 00 00	 call	 __endthreadex
; Line 93
  000a7	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000aa	83 c4 04	 add	 esp, 4
  000ad	33 cd		 xor	 ecx, ebp
  000af	33 c0		 xor	 eax, eax
  000b1	5f		 pop	 edi
  000b2	5e		 pop	 esi
  000b3	5b		 pop	 ebx
  000b4	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000b9	8b e5		 mov	 esp, ebp
  000bb	5d		 pop	 ebp
  000bc	c2 04 00	 ret	 4
?AcceptThread@@YGIPAX@Z ENDP				; AcceptThread
_TEXT	ENDS
; Function compile flags: /Ogtp
;	COMDAT ?GetListenSocket@CNetwork@@QAEIXZ
_TEXT	SEGMENT
?GetListenSocket@CNetwork@@QAEIXZ PROC			; CNetwork::GetListenSocket, COMDAT
; _this$ = ecx
; File e:\github\mso_code\4dyuchinet_latest\network.h
; Line 99
  00000	8b 41 38	 mov	 eax, DWORD PTR [ecx+56]
  00003	c3		 ret	 0
?GetListenSocket@CNetwork@@QAEIXZ ENDP			; CNetwork::GetListenSocket
_TEXT	ENDS
; Function compile flags: /Ogtp
;	COMDAT ?SetAcceptTHreadHandle@CNetwork@@QAEXPAX@Z
_TEXT	SEGMENT
_hAcceptThread$ = 8					; size = 4
?SetAcceptTHreadHandle@CNetwork@@QAEXPAX@Z PROC		; CNetwork::SetAcceptTHreadHandle, COMDAT
; _this$ = ecx
; File e:\github\mso_code\4dyuchinet_latest\network.h
; Line 71
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	8b 45 08	 mov	 eax, DWORD PTR _hAcceptThread$[ebp]
  00006	89 41 74	 mov	 DWORD PTR [ecx+116], eax
  00009	5d		 pop	 ebp
  0000a	c2 04 00	 ret	 4
?SetAcceptTHreadHandle@CNetwork@@QAEXPAX@Z ENDP		; CNetwork::SetAcceptTHreadHandle
_TEXT	ENDS
; Function compile flags: /Ogtp
;	COMDAT ?GetAcceptInterval@CNetwork@@QAEKXZ
_TEXT	SEGMENT
?GetAcceptInterval@CNetwork@@QAEKXZ PROC		; CNetwork::GetAcceptInterval, COMDAT
; _this$ = ecx
; File e:\github\mso_code\4dyuchinet_latest\network.h
; Line 68
  00000	8b 41 64	 mov	 eax, DWORD PTR [ecx+100]
  00003	c3		 ret	 0
?GetAcceptInterval@CNetwork@@QAEKXZ ENDP		; CNetwork::GetAcceptInterval
_TEXT	ENDS
; Function compile flags: /Ogtp
;	COMDAT ?EndAcceptThread@@YAHIPAX@Z
_TEXT	SEGMENT
_socketListen$ = 8					; size = 4
_hAcceptThread$ = 12					; size = 4
?EndAcceptThread@@YAHIPAX@Z PROC			; EndAcceptThread, COMDAT
; File e:\github\mso_code\4dyuchinet_latest\accept.cpp
; Line 34
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
; Line 35
  00003	8b 45 08	 mov	 eax, DWORD PTR _socketListen$[ebp]
  00006	83 f8 ff	 cmp	 eax, -1
  00009	75 04		 jne	 SHORT $LN1@EndAcceptT
; Line 36
  0000b	33 c0		 xor	 eax, eax
; Line 43
  0000d	5d		 pop	 ebp
  0000e	c3		 ret	 0
$LN1@EndAcceptT:
; Line 38
  0000f	50		 push	 eax
  00010	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__closesocket@4
; Line 39
  00016	6a ff		 push	 -1
  00018	ff 75 0c	 push	 DWORD PTR _hAcceptThread$[ebp]
  0001b	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__WaitForSingleObject@8
; Line 40
  00021	ff 75 0c	 push	 DWORD PTR _hAcceptThread$[ebp]
  00024	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__CloseHandle@4
; Line 42
  0002a	b8 01 00 00 00	 mov	 eax, 1
; Line 43
  0002f	5d		 pop	 ebp
  00030	c3		 ret	 0
?EndAcceptThread@@YAHIPAX@Z ENDP			; EndAcceptThread
_TEXT	ENDS
; Function compile flags: /Ogtp
;	COMDAT ?StartAcceptThread@@YAHPAVCNetwork@@@Z
_TEXT	SEGMENT
_ThreadID$ = -4						; size = 4
_pNetwork$ = 8						; size = 4
?StartAcceptThread@@YAHPAVCNetwork@@@Z PROC		; StartAcceptThread, COMDAT
; File e:\github\mso_code\4dyuchinet_latest\accept.cpp
; Line 15
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	56		 push	 esi
; Line 18
  00005	8b 75 08	 mov	 esi, DWORD PTR _pNetwork$[ebp]
  00008	8d 45 fc	 lea	 eax, DWORD PTR _ThreadID$[ebp]
  0000b	57		 push	 edi
  0000c	50		 push	 eax
  0000d	6a 00		 push	 0
  0000f	56		 push	 esi
  00010	68 00 00 00 00	 push	 OFFSET ?AcceptThread@@YGIPAX@Z ; AcceptThread
  00015	6a 00		 push	 0
  00017	6a 00		 push	 0
  00019	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _ThreadID$[ebp], 0
  00020	e8 00 00 00 00	 call	 __beginthreadex
  00025	8b f8		 mov	 edi, eax
  00027	83 c4 18	 add	 esp, 24			; 00000018H
; Line 20
  0002a	83 ff ff	 cmp	 edi, -1
  0002d	75 28		 jne	 SHORT $LN1@StartAccep
; Line 22
  0002f	6a 00		 push	 0
  00031	68 00 00 00 00	 push	 OFFSET ??_C@_05NAOIJFC@Error?$AA@
  00036	68 00 00 00 00	 push	 OFFSET ??_C@_0BN@EOPMAGF@Fail?5to?5Create?5Accept?5Thread?$AA@
  0003b	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetActiveWindow@0
  00041	50		 push	 eax
  00042	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__MessageBoxA@16
  00048	5f		 pop	 edi
; File e:\github\mso_code\4dyuchinet_latest\network.h
; Line 71
  00049	c7 46 74 00 00
	00 00		 mov	 DWORD PTR [esi+116], 0
; File e:\github\mso_code\4dyuchinet_latest\accept.cpp
; Line 24
  00050	33 c0		 xor	 eax, eax
  00052	5e		 pop	 esi
; Line 30
  00053	8b e5		 mov	 esp, ebp
  00055	5d		 pop	 ebp
  00056	c3		 ret	 0
$LN1@StartAccep:
; Line 26
  00057	6a 02		 push	 2
  00059	57		 push	 edi
  0005a	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__SetThreadPriority@8
; File e:\github\mso_code\4dyuchinet_latest\network.h
; Line 71
  00060	89 7e 74	 mov	 DWORD PTR [esi+116], edi
; File e:\github\mso_code\4dyuchinet_latest\accept.cpp
; Line 29
  00063	b8 01 00 00 00	 mov	 eax, 1
  00068	5f		 pop	 edi
  00069	5e		 pop	 esi
; Line 30
  0006a	8b e5		 mov	 esp, ebp
  0006c	5d		 pop	 ebp
  0006d	c3		 ret	 0
?StartAcceptThread@@YAHPAVCNetwork@@@Z ENDP		; StartAcceptThread
_TEXT	ENDS
END
